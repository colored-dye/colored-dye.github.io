---
title: Go语言学习01
date: 2022-01-23 16:38:13
tags: [Programming-Languages, Go]
categories: [Programming-Languages]
---

最近对Go语言有点兴趣www，发现Go在使用了C语言中指针等概念之外，还提供了一些有趣的特性。(更重要的原因是发现自己只会C和Python而不会比较新的语言QAQ之前学了点Rust却半途而废了) 在这里简单记录一下\~

<!--more-->

### 1. `println`和`fmt.Println`的区别

[参考资料](https://blog.csdn.net/lenfranky/article/details/102898190)

在开始学习任何一门新语言的时候，首先要做的就是“Hello, world!”辣\~ 但是Go官方学习指南给的示例代码却需要先引入包`fmt`，再调用`fmt.Println("Hello, world!")`. 个人感觉这个`fmt.Println`的写法不太优雅，于是在编辑器里尝试性地输了`printf`、`println`等等写法，发现`println`的用法是存在的。

这就很奇怪了。既然已经有了简洁的`println`写法，为什么还非要用`fmt`包呢？参考资料告诉我们，这两个函数的主要差别在于：`println`主要用于调试，因为其不需要依赖项；而`fmt.Println`主要用于生产环境，更具有通用性。更深来讲，`println`是向`stderr`流写，而`fmt.Println`是向`stdout`写。

参考文章还指出，如果两者混用有可能会发生输出顺序乱序的情况。

### 2. 面向对象特性

面向对象有三个核心概念：封装，继承和多态。

#### (1) 封装

Go语言中没有类的概念，有的只是结构体和方法。结构体的定义与C十分类似，如下所示：

```go
type Perceptron struct {
	input   [][]float64
	output  []float64
	weights []float64
	bias    float64
	epochs  int
}
```

关于方法，Go方法是作用在“接收者(Receiver)”上的函数，所谓“接收者”就是某一类型的变量。定义方法的一般格式为：`func (receiver_ptr receiver_type) methodName(parameter_list) return_value {...}`. 一个例子如下：

```go
func (p *Perceptron) forward(x []float64) (sum float64) {
	return p.sigmoid(dotProduct(p.weights, x) + p.bias)
}
```

可以注意到，接收者参数一般用指针传递。如果要使用某方法，只需要`p.forward(x)`即可，与大多数支持面向对象的语言调用方法的方式一致。

#### (2) 继承

Go中通过**在结构体内嵌匿名类型**实现继承。

```go
type Base struct {
    b int
    name string
}

type A struct {
    Base
    a int
}
```

#### (3) 多态

话不多说，直接上代码：

```go
type Mammal interface {
    Say()
}

type Dog struct {}
type Cat struct {}

func (d *Dog) Say() {
    fmt.Println("Bark")
}

func (c *Cat) Say() {
    fmt.Println("Meow")
}

func main() {
    var m Mammal
    m = Dog{}
    m.Say()
    m = Cat{}
    m.Say()
}
```

```go
// Output
Bark
Meow
```

从上例可以看出，`Mammal`当中定义了接口，而其他任意定义了该接口的类型都可以用这个接口来接收。

另外可以注意的是，Go当中结构体类型和指针类型调用方法的方式相同，都是`‘.’`.
